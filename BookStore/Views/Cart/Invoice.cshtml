@model BookStore.Models.Order

@{
    Layout = ""; // برای چاپ بدون قالب سایت
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
}

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="utf-8" />
    <title>فاکتور سفارش</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/invoice.css" asp-append-version="true" />

</head>
<body>
    <div class="invoice-box">
        <!-- هدر -->
        <div class="invoice-header d-flex justify-content-between align-items-center">
            <div>
                <div class="logo">📚 BookStore</div>
                <div class="store-info">
                    تهران، خیابان مثال، پلاک ۱۲۳<br />
                    تلفن: 021-12345678<br />
                    ایمیل: info@bookstore.com
                </div>
            </div>
            <div class="invoice-details text-end">
                <div><strong>تاریخ:</strong> @Model.OrderDate.ToString("yyyy/MM/dd HH:mm")</div>
                <div><strong>شماره سفارش:</strong> @Model.Id</div>
            </div>
        </div>

        <!-- جدول سفارش -->
        <h5 class="mb-3 text-primary"><i class="fa-solid fa-receipt me-1"></i> جزئیات سفارش</h5>
        <table class="table table-bordered align-middle">
            <thead>
                <tr>
                    <th>عنوان کتاب</th>
                    <th class="text-center">تعداد</th>
                    <th class="text-center">قیمت واحد</th>
                    <th class="text-center">قیمت کل</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@item.Book.Title</td>
                        <td class="text-center">@item.Quantity</td>
                        <td class="text-center">@item.UnitPrice.ToString("N0") تومان</td>
                        <td class="text-center">@((item.UnitPrice * item.Quantity).ToString("N0")) تومان</td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- مجموع -->
        <div class="text-end mt-4 total-box">
            💰 مجموع کل: @Model.TotalAmount.ToString("N0") تومان
        </div>

        <!-- QR Code پرداخت -->
        <div class="qr-section">
            <p class="text-muted">برای پرداخت آنلاین، QR Code را اسکن کنید</p>
            <img src="~/images/payment-qr.png" alt="QR Code پرداخت" />
        </div>

        <!-- امضا -->
        <div class="signature-section">
            <div class="signature-box">
                <div class="signature-line">امضای مشتری</div>
            </div>
            <div class="signature-box">
                <div class="signature-line">امضای فروشگاه</div>
            </div>
        </div>

        <!-- دکمه چاپ -->
        <div class="text-center print-btn">
            <button onclick="window.print()" class="btn btn-primary mt-3">
                🖨️ چاپ فاکتور
            </button>
        </div>
    </div>
</body>
</html>
